graph TD
    A[Сбор метрик<br>состояния] --> B[Проверка<br>порогов]
    A --> C[Предсказание<br>будущей нагрузки]
    
    B --> D{Превышение<br>порога?}
    C --> E{Прогноз<br>перегрузки?}
    
    D -->|Да| F[Реактивная миграция<br>на основе<br>марковских процессов]
    E -->|Да| G[Проактивная миграция<br>на основе<br>Q-Learning]
    
    D -->|Нет| E
    E -->|Нет| A
    
    linkStyle default stroke:black,color:black
    
    F --> H[Выполнение<br>миграции]
    G --> H
    
    H --> I[Обновление<br>матрицы переходов]
    H --> J[Обновление<br>Q-значений]
    
    I --> A
    J --> A

    classDef default fill:white,stroke:black,stroke-width:1px,color:black;
    classDef decision fill:#fbb,stroke:black,stroke-width:1px,color:black;
    classDef process fill:#fdb,stroke:black,stroke-width:1px,color:black;
    classDef data fill:#bbf,stroke:black,stroke-width:1px,color:black;
    classDef action fill:#bfb,stroke:black,stroke-width:1px,color:black;
    
    class A,B,C data;
    class D,E decision;
    class F,G,I,J process;
    class H action;