graph TD
    A[Мониторинг метрик узлов] --> B{Превышение порога?}
    B -- Нет --> A
    B -- Да --> C[Выбор сервиса для миграции]
    C --> D[Расчет вероятностей переходов по матрице]
    D --> E[Выбор целевого узла]
    E --> F[Выполнение миграции]
    F --> G[Обновление матрицы переходов]
    G --> A

    classDef default fill:white,stroke:black,stroke-width:1px,color:black;
    classDef decision fill:#fbb,stroke:black,stroke-width:1px,color:black;
    classDef process fill:#fdb,stroke:black,stroke-width:1px,color:black;
    classDef data fill:#bbf,stroke:black,stroke-width:1px,color:black;
    classDef action fill:#bfb,stroke:black,stroke-width:1px,color:black;
    
    class A,G data;
    class B decision;
    class C,D,E process;
    class F action;